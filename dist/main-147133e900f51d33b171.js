(()=>{"use strict";var t={};function e(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function o(t){return e(t,Date.now())}function i(t){const e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):"number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?new Date(t):new Date(NaN)}function n(t){const e=i(t);return e.setHours(0,0,0,0),e}function s(t){return e=t,i=o(t),+n(e)==+n(i);var e,i}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var o=t.g.document;if(!e&&o&&(o.currentScript&&"SCRIPT"===o.currentScript.tagName.toUpperCase()&&(e=o.currentScript.src),!e)){var i=o.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();let r={};function c(){return r}function d(t,e){const o=c(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,s=i(t),r=s.getDay(),d=(r<n?7:0)+r-n;return s.setDate(s.getDate()-d),s.setHours(0,0,0,0),s}function a(t,e){return function(t,e,o){return+d(t,o)==+d(e,o)}(t,o(t),e)}function l(){return"id"+Math.random().toString(36).slice(2)}class u{constructor(t,e,o,i){this._title=t,this._description=e,this._dueDate=o,this._priority=i,this._completed=!1,this._id=l()}get title(){return this._title}set title(t){this._title=t,this.saveToLocalStorage()}get id(){return this._id}get description(){return this._description}set description(t){this._description=t,this.saveToLocalStorage()}get dueDate(){return this._dueDate}set dueDate(t){this._dueDate=t,this.saveToLocalStorage()}get priority(){return this._priority}set priority(t){this._priority=t,this.saveToLocalStorage()}get completed(){return this._completed}set completed(t){this._completed=t,this.saveToLocalStorage()}saveToLocalStorage(){const t=JSON.parse(localStorage.getItem("projectList"))||[],e=t.findIndex((t=>t._todos.some((t=>t._id===this._id))));if(-1!==e){const o=t[e]._todos.findIndex((t=>t._id===this._id));-1!==o?t[e]._todos[o]={...t[e]._todos[o],...this}:t[e]._todos.push(this)}else t.push({_todos:[this]});localStorage.setItem("projectList",JSON.stringify(t))}}class p{constructor(t){this._title=t,this._todos=[],this._id=l()}get title(){return this._title}set title(t){this._title=t,this.saveToLocalStorage()}get id(){return this._id}get todoList(){return this._todos}set todoList(t){this._todos=t,this.saveToLocalStorage()}deleteTodo(t){this.todoList=this.todoList.filter((e=>e.id!==t.id)),this.saveToLocalStorage()}addTodo(t){this.todoList=[...this.todoList,t],this.saveToLocalStorage()}saveToLocalStorage(){const t=JSON.parse(localStorage.getItem("projectList"))||[],e=t.findIndex((t=>t._id===this._id));-1!==e?t[e]={...t[e],...this}:t.push(this),localStorage.setItem("projectList",JSON.stringify(t))}}const h=t.p+"images/trash-40996a056d015a648343.svg",m=t.p+"images/plus-807c9e6a5b5e4ae10359.svg",g=document.getElementById("todo-list");let L;const v=t=>{L=t,f(t),E(t)},f=t=>{g.innerHTML="",t.todoList.forEach((e=>{g.append(j(e,t))}))},E=t=>{const e=document.getElementById("button-add-todo");"Today"!==t.title&&"This Week"!==t.title?e||(()=>{const t=document.querySelector("main"),e=document.createElement("button");e.id="button-add-todo";const o=document.createElement("img");o.src=m,o.alt="Add Todo";const i=document.createElement("p");i.textContent="Add Todo",t.appendChild(e),e.append(o,i),T(e)})():e&&e.remove()},T=t=>{t&&(t.removeEventListener("click",y),t.addEventListener("click",y))};function y(){let t=new u;L.addTodo(t),f(L)}const j=(t,e)=>{const o=document.createElement("button"),i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),r=k(t,"high","medium","low"),c=w(t),d=I(t),a=D(t,d),l=N(r,c),u=x(t),p=_(o,t,e);return o.classList.add("todo"),o.append(i),i.classList.add("todo-main"),i.append(n,s),n.classList.add("todo-left"),s.classList.add("todo-right"),n.append(a,d),s.append(u,p),P(o,l),b(a,d,u,p,r,c),O(t,a,d,u,p,r,c),o},_=(t,e,o)=>{const i=document.createElement("img");return i.src=h,i.addEventListener("click",(()=>S(t,e,o))),i},S=(t,e)=>{J.deleteTodoFromAllProjects(e.id),g.removeChild(t)},b=(...t)=>{t.forEach((t=>{t.addEventListener("click",(t=>{t.stopPropagation()}))}))},k=(t,...e)=>{const o=document.createElement("select");return o.name="Priority",e.forEach((e=>{let i=document.createElement("option");i.value=e,t.priority===i.value&&(i.selected=!0),i.textContent=e.charAt(0).toUpperCase()+e.slice(1),o.appendChild(i),C(t,"click",[i,"priority"])})),o},w=t=>{const e=document.createElement("textarea");return e.value="",void 0!==t.description&&(e.value=t.description),e.placeholder="Description...",e},D=(t,e)=>{const o=document.createElement("input");return o.type="checkbox",o.checked=t.completed,!0===o.checked?e.style.textDecoration="line-through":e.style.textDecoration="none",o},I=t=>{const e=document.createElement("input");return e.placeholder="Enter something...",void 0===t.title?e.value="":e.value=t.title,e},x=t=>{const e=document.createElement("input");return e.type="date",e.id="due-date",e.value=t.dueDate||"",e},N=(t,e)=>{const o=document.createElement("div");return o.classList.add("todo-details"),o.append(t,e),o},P=(t,e)=>{t.addEventListener("click",(()=>{t.contains(e)?t.removeChild(e):t.appendChild(e)}))},C=(t,e,...o)=>{o.forEach((([o,i])=>{o.addEventListener(e,(()=>{t[i]=o.value}))}))},O=(t,e,o,i,n,s,r)=>{o.addEventListener("keydown",(t=>{"Enter"===t.key&&o.blur()})),e.addEventListener("click",(()=>{!0===e.checked?o.style.textDecoration="line-through":o.style.textDecoration="none",t.completed=e.checked})),C(t,"input",[r,"description"],[i,"dueDate"],[o,"title"]),b(e,o,i,n,s,r)},B=document.getElementById("button-add-project"),W=document.getElementById("projects-list");let A=document.getElementById("project-title");const J=new class{constructor(){this._projectList=this.loadLocalStorage()}get projectList(){return this._projectList}set projectList(t){this._projectList=t,this.saveToLocalStorage()}deleteProject(t){t.todoList.forEach((t=>{this.deleteTodoFromAllProjects(t.id)})),this.projectList=this.projectList.filter((e=>e.id!==t.id)),this.saveToLocalStorage()}addProject(t){this.projectList=[...this.projectList,t],this.saveToLocalStorage()}saveToLocalStorage(){localStorage.setItem("projectList",JSON.stringify(this.projectList))}loadLocalStorage(){return(JSON.parse(localStorage.getItem("projectList"))||[]).map((t=>{const e=Object.assign(new p,t);return e._todos=t._todos.map((t=>Object.assign(new u,t))),e}))}getTodoToday(){return this._projectList.flatMap((t=>t.todoList.filter((t=>s(i(t.dueDate))))))}getTodosThisWeek(){return this._projectList.flatMap((t=>t.todoList.filter((t=>a(function(t,o){const n=i(t);return isNaN(o)?e(t,NaN):o?(n.setDate(n.getDate()+o),n):n}(i(t.dueDate),1))))))}findProjectByTodoId(t){return this._projectList.find((e=>e.todoList.some((e=>e.id===t))))}deleteTodoFromAllProjects(t){const e=this.findProjectByTodoId(t);e&&(e.deleteTodo({id:t}),this.saveToLocalStorage())}};B.addEventListener("click",(()=>{M()}));const M=()=>{const t=new p("Untitled");J.addProject(t),F()},F=()=>{W.innerHTML="",J.projectList.forEach((t=>{"Today"!==t.title&&"This Week"!==t.title&&"Inbox"!==t.title&&(t=>{const e=document.createElement("li"),o=document.createElement("button"),i=document.createElement("p"),n=document.createElement("img");n.src=h,e.classList.add("project"),i.textContent=t.title,W.append(e),e.append(o),o.append(i,n),b(o,n),o.addEventListener("click",(()=>U(t))),n.addEventListener("click",(()=>H(t,e)))})(t)}))};F();const H=(t,e)=>{J.deleteProject(t),W.removeChild(e),J.projectList.forEach((t=>{"Inbox"===t.title&&U(t)}))},U=t=>{if(A.textContent=t.title,(t=>{if(A.contentEditable="true","Inbox"===t.title||"Today"===t.title||"This Week"===t.title)return void(A.contentEditable="false");const e=A.cloneNode(!0);A.parentNode.replaceChild(e,A),A=e,e.addEventListener("keydown",(t=>{"Enter"===t.key&&e.blur()})),A.addEventListener("blur",(()=>{t.title=A.textContent,F(),U(t)}))})(t),"Today"===t.title){const t=J.getTodoToday();v({title:"Today",todoList:t})}else if("This Week"===t.title){const t=J.getTodosThisWeek();v({title:"This Week",todoList:t})}else v(t)},$=document.getElementById("button-inbox"),q=document.getElementById("button-today"),R=document.getElementById("button-week");let z=J.projectList.find((t=>"Inbox"===t.title)),G=J.projectList.find((t=>"Today"===t.title)),K=J.projectList.find((t=>"This Week"===t.title));z||(z=new p("Inbox"),J.addProject(z)),G||(G=new p("Today"),J.addProject(G)),K||(K=new p("This Week"),J.addProject(K)),$.addEventListener("click",(()=>U(z))),q.addEventListener("click",(()=>U(G))),R.addEventListener("click",(()=>U(K))),J.projectList.forEach((t=>{"Inbox"===t.title&&U(t)}))})();